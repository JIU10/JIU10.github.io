{"pages":[{"title":"","text":"","link":"/About/index.html"},{"title":"","text":"","link":"/Links/index.html"}],"posts":[{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2023/03/11/hello-world/"},{"title":"STM32H7使用ADC的注意事项与所遇问题","text":"进行ADC配置时候需要注意​ 此处是配置单端输入和差分输入 ​ 注意最大频率是36MHz ​ 用ADC并搭配DMA的必须开连续转换模式 ​ 单通道转换完成作为结束 碰到的问题DMA的单次模式和循环模式的选择与ADC的连续转换模式和单次转换模式 2023/3/11 目前问题：当进行采波时会不连续 猜测：看的教程说ADC+DMA必须选择ADC的连续转换模式，而ADC连续转换模式必须要求DMA是循环模式，猜测是DMA的循环模式导致的间断点，因为目前是只采集一次，但是软件触发（这里有个问题，如果开了连续转换模式，软件触发是否有用），只开了一次，而DMA一直在循环搬运导致数据出现问题？ 调试打算： 将ADC改成单次转换模式，并将DMA改成单次模式，观察现象。 如果没有间断点，说明软件触发对于连续转换模式是有用的，它导致了转换的停止，但DMA没有停止，故产生不连续波。 如果不是，寻找其他原因。 如果ADC的连续转换模式意思是完成转换后自己开启，那么还有触发的事情吗？？？/未解之谜 调试结果： 将Continuous Conversion Mode设为Disable，Conversion Data Management Mode设为DMA one shot 结果：没有进入HAL_ADC_ConvCpltCallback函数，无法输出波形 将Continuous Conversion Mode设为Enable，Conversion Data Management Mode设为DMA Circular Mode，DMA的模式设为normal 结果进入HAL_ADC_ConvCpltCallback函数，波形正常，间断消失 结论 ADC连续转换模式还是由触发控制，触发后自动重启进行采集，单次转换即使开了似乎也不会采集，意思是只采集一次（存疑） DMA选项页的Mode的normal和circular 1 1 1 1 1 1 2 2 2 2 2 1 1 1 1 1 2 2 2 2 如上图表格中，第一行代表单次模式，第二行代表DMA，先接收6个数据，然后接收5个数据，单次模式就会数据溢出，而DMA循环模式就会自动重启从第一个开始存，本程序中接收的数据是固定的，可以选择normal模式，选择circular会导致前面数据被覆盖，然后导致截断 仍旧没搞清楚Conversion Data Management Mode，看cubemx的描述意思应该是使用DMA一次性传还是循环传，DMA One shot和ADC的单次转换模式类似（？存疑）","link":"/2023/03/12/STM32H7%E4%BD%BF%E7%94%A8ADC%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E4%B8%8E%E6%89%80%E9%81%87%E9%97%AE%E9%A2%98/"}],"tags":[{"name":"stm32h7 adc dma","slug":"stm32h7-adc-dma","link":"/tags/stm32h7-adc-dma/"}],"categories":[]}